<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Web Modeler" exporterVersion="9d4d45f" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.8.0">
  <bpmn:collaboration id="Collaboration_136ngxi">
    <bpmn:participant id="Participant_1lqy57p" name="Batch Process" processRef="Process_oszbbka" />
    <bpmn:textAnnotation id="TextAnnotation_1g42i5b">
      <bpmn:text>The waiting time before checking pending sales again is configurable.</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0ajleb9" associationDirection="None" sourceRef="Event_1mnpgwc" targetRef="TextAnnotation_1g42i5b" />
    <bpmn:textAnnotation id="TextAnnotation_1u5vm6p">
      <bpmn:text>Obtains the list of pending sales that have not yet exceeded their maximum number of Fiscalize attempts.</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_003b9tk" associationDirection="None" sourceRef="Activity_1tmlpf5" targetRef="TextAnnotation_1u5vm6p" />
  </bpmn:collaboration>
  <bpmn:process id="Process_oszbbka" isExecutable="false">
    <bpmn:laneSet id="LaneSet_1jirecd">
      <bpmn:lane id="Lane_02iwdzf" name="POS">
        <bpmn:flowNodeRef>Event_0l4evo0</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1tmlpf5</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1jyndlc</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_15rb4en</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1mnpgwc</bpmn:flowNodeRef>
        <bpmn:childLaneSet id="LaneSet_1rdmlr4">
          <bpmn:lane id="Lane_0ipt1sa">
            <bpmn:flowNodeRef>Event_0l4evo0</bpmn:flowNodeRef>
            <bpmn:flowNodeRef>Activity_1tmlpf5</bpmn:flowNodeRef>
            <bpmn:flowNodeRef>Activity_1jyndlc</bpmn:flowNodeRef>
            <bpmn:flowNodeRef>Gateway_15rb4en</bpmn:flowNodeRef>
            <bpmn:flowNodeRef>Event_1mnpgwc</bpmn:flowNodeRef>
          </bpmn:lane>
        </bpmn:childLaneSet>
      </bpmn:lane>
      <bpmn:lane id="Lane_0s7mnhx" name="IFP">
        <bpmn:flowNodeRef>Gateway_0etimxl</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1x476at</bpmn:flowNodeRef>
        <bpmn:childLaneSet id="LaneSet_00e6cuy">
          <bpmn:lane id="Lane_06qisvq">
            <bpmn:flowNodeRef>Gateway_0etimxl</bpmn:flowNodeRef>
            <bpmn:flowNodeRef>Activity_1x476at</bpmn:flowNodeRef>
          </bpmn:lane>
        </bpmn:childLaneSet>
      </bpmn:lane>
      <bpmn:lane id="Lane_0jyayne" name="BackOffice">
        <bpmn:flowNodeRef>Activity_169r96p</bpmn:flowNodeRef>
        <bpmn:childLaneSet id="LaneSet_0e026tl">
          <bpmn:lane id="Lane_1apssmw">
            <bpmn:flowNodeRef>Activity_169r96p</bpmn:flowNodeRef>
          </bpmn:lane>
        </bpmn:childLaneSet>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="Event_0l4evo0">
      <bpmn:outgoing>Flow_1obaxxc</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_1tmlpf5" name="Get pending sales">
      <bpmn:incoming>Flow_0qs457z</bpmn:incoming>
      <bpmn:incoming>Flow_1xlnibr</bpmn:incoming>
      <bpmn:outgoing>Flow_1mdpjtl</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:receiveTask id="Activity_1jyndlc" name="Start batch process">
      <bpmn:incoming>Flow_1obaxxc</bpmn:incoming>
      <bpmn:outgoing>Flow_0qs457z</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:sequenceFlow id="Flow_1obaxxc" sourceRef="Event_0l4evo0" targetRef="Activity_1jyndlc" />
    <bpmn:sequenceFlow id="Flow_1mdpjtl" sourceRef="Activity_1tmlpf5" targetRef="Gateway_15rb4en" />
    <bpmn:sequenceFlow id="Flow_1b78dc2" name="No" sourceRef="Gateway_15rb4en" targetRef="Event_1mnpgwc" />
    <bpmn:sequenceFlow id="Flow_0qs457z" sourceRef="Activity_1jyndlc" targetRef="Activity_1tmlpf5" />
    <bpmn:sequenceFlow id="Flow_1xlnibr" sourceRef="Event_1mnpgwc" targetRef="Activity_1tmlpf5" />
    <bpmn:exclusiveGateway id="Gateway_15rb4en" name="Does it exist?" default="Flow_1b78dc2">
      <bpmn:incoming>Flow_1mdpjtl</bpmn:incoming>
      <bpmn:outgoing>Flow_1b78dc2</bpmn:outgoing>
      <bpmn:outgoing>Flow_0s6exoz</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:intermediateCatchEvent id="Event_1mnpgwc">
      <bpmn:incoming>Flow_1b78dc2</bpmn:incoming>
      <bpmn:incoming>Flow_0tlodow</bpmn:incoming>
      <bpmn:incoming>Flow_15h9o19</bpmn:incoming>
      <bpmn:outgoing>Flow_1xlnibr</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_1lin1ep" />
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_0s6exoz" name="Yes" sourceRef="Gateway_15rb4en" targetRef="Activity_1x476at" />
    <bpmn:exclusiveGateway id="Gateway_0etimxl" name="Ok?">
      <bpmn:incoming>Flow_1ee5l7k</bpmn:incoming>
      <bpmn:outgoing>Flow_08s4o56</bpmn:outgoing>
      <bpmn:outgoing>Flow_15h9o19</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1ee5l7k" sourceRef="Activity_1x476at" targetRef="Gateway_0etimxl" />
    <bpmn:sequenceFlow id="Flow_08s4o56" name="Yes" sourceRef="Gateway_0etimxl" targetRef="Activity_169r96p" />
    <bpmn:sendTask id="Activity_1x476at" name="Fiscalize sales at the MRA">
      <bpmn:incoming>Flow_0s6exoz</bpmn:incoming>
      <bpmn:outgoing>Flow_1ee5l7k</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:task id="Activity_169r96p" name="Upload sales to the BackOffice">
      <bpmn:incoming>Flow_08s4o56</bpmn:incoming>
      <bpmn:outgoing>Flow_0tlodow</bpmn:outgoing>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0tlodow" sourceRef="Activity_169r96p" targetRef="Event_1mnpgwc" />
    <bpmn:sequenceFlow id="Flow_15h9o19" sourceRef="Gateway_0etimxl" targetRef="Event_1mnpgwc" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_136ngxi">
      <bpmndi:BPMNShape id="BPMNShape_07cvdj6" bpmnElement="Participant_1lqy57p" isHorizontal="false">
        <dc:Bounds x="1180" y="110" width="790" height="630" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0jyayne_di" bpmnElement="Lane_0jyayne" isHorizontal="false">
        <dc:Bounds x="1750" y="140" width="220" height="600" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1apssmw_di" bpmnElement="Lane_1apssmw" isHorizontal="false">
        <dc:Bounds x="1750" y="170" width="220" height="570" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0s7mnhx_di" bpmnElement="Lane_0s7mnhx" isHorizontal="false">
        <dc:Bounds x="1500" y="140" width="250" height="600" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_06qisvq_di" bpmnElement="Lane_06qisvq" isHorizontal="false">
        <dc:Bounds x="1500" y="170" width="250" height="570" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_02iwdzf_di" bpmnElement="Lane_02iwdzf" isHorizontal="false">
        <dc:Bounds x="1180" y="140" width="320" height="600" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0ipt1sa_di" bpmnElement="Lane_0ipt1sa" isHorizontal="false">
        <dc:Bounds x="1180" y="170" width="320" height="570" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0gpb749" bpmnElement="Event_0l4evo0">
        <dc:Bounds x="1362" y="190" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0o7vgob_di" bpmnElement="Activity_1tmlpf5">
        <dc:Bounds x="1330" y="368" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_15rl1ts_di" bpmnElement="Activity_1jyndlc">
        <dc:Bounds x="1330" y="258" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_15rb4en_di" bpmnElement="Gateway_15rb4en" isMarkerVisible="true">
        <dc:Bounds x="1355" y="485" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1278" y="503" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1mnpgwc_di" bpmnElement="Event_1mnpgwc">
        <dc:Bounds x="1362" y="592" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0etimxl_di" bpmnElement="Gateway_0etimxl" isMarkerVisible="true">
        <dc:Bounds x="1615" y="365" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1583.5" y="383" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_101qv84_di" bpmnElement="Activity_1x476at">
        <dc:Bounds x="1590" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_169r96p_di" bpmnElement="Activity_169r96p">
        <dc:Bounds x="1820" y="350" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1obaxxc_di" bpmnElement="Flow_1obaxxc">
        <di:waypoint x="1380" y="226" />
        <di:waypoint x="1380" y="258" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mdpjtl_di" bpmnElement="Flow_1mdpjtl">
        <di:waypoint x="1380" y="448" />
        <di:waypoint x="1380" y="485" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1b78dc2_di" bpmnElement="Flow_1b78dc2">
        <di:waypoint x="1380" y="535" />
        <di:waypoint x="1380" y="592" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1383" y="557" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0qs457z_di" bpmnElement="Flow_0qs457z">
        <di:waypoint x="1380" y="338" />
        <di:waypoint x="1380" y="368" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1xlnibr_di" bpmnElement="Flow_1xlnibr">
        <di:waypoint x="1362" y="610" />
        <di:waypoint x="1260" y="610" />
        <di:waypoint x="1260" y="408" />
        <di:waypoint x="1330" y="408" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s6exoz_di" bpmnElement="Flow_0s6exoz">
        <di:waypoint x="1405" y="510" />
        <di:waypoint x="1540" y="510" />
        <di:waypoint x="1540" y="290" />
        <di:waypoint x="1590" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1431" y="493" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ee5l7k_di" bpmnElement="Flow_1ee5l7k">
        <di:waypoint x="1640" y="330" />
        <di:waypoint x="1640" y="365" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08s4o56_di" bpmnElement="Flow_08s4o56">
        <di:waypoint x="1665" y="390" />
        <di:waypoint x="1820" y="390" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1691" y="372" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0tlodow_di" bpmnElement="Flow_0tlodow">
        <di:waypoint x="1870" y="430" />
        <di:waypoint x="1870" y="610" />
        <di:waypoint x="1398" y="610" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15h9o19_di" bpmnElement="Flow_15h9o19">
        <di:waypoint x="1640" y="415" />
        <di:waypoint x="1640" y="600" />
        <di:waypoint x="1395" y="600" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_003b9tk_di" bpmnElement="Association_003b9tk">
        <di:waypoint x="1350" y="368" />
        <di:waypoint x="1300" y="302" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_0ajleb9_di" bpmnElement="Association_0ajleb9">
        <di:waypoint x="1371" y="625" />
        <di:waypoint x="1350" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_1u5vm6p_di" bpmnElement="TextAnnotation_1u5vm6p">
        <dc:Bounds x="1190" y="210" width="110" height="131" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_1g42i5b_di" bpmnElement="TextAnnotation_1g42i5b">
        <dc:Bounds x="1260" y="660" width="159.9911971830986" height="59.99814677538918" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
